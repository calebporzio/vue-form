!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.VueForm=r()}(this,function(){"use strict";function t(){this.errors={},this.hasErrors=function(){return!_.isEmpty(this.errors)},this.has=function(t){return _.indexOf(_.keys(this.errors),t)>-1},this.all=function(){return this.errors},this.flatten=function(){return _.flatten(_.toArray(this.errors))},this.get=function(t){if(this.has(t))return this.errors[t][0]},this.set=function(t){"object"==typeof t?this.errors=t:this.errors={form:["Whoops, looks like something went wrong."]}},this.forget=function(){this.errors={}}}function r(){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])arguments[t].hasOwnProperty(r)&&(arguments[0][r]=arguments[t][r]);return arguments[0]}function n(n,s){var e=this;this.data=s||{},this.errors=new t,this.ready=!1,this.busy=!1,this.successful=!1,this.startProcessing=function(){e.errors.forget(),e.busy=!0,e.successful=!1},this.finishProcessing=function(){e.busy=!1,e.successful=!0},this.resetStatus=function(){e.errors.forget(),e.busy=!1,e.successful=!1},this.setErrors=function(t){e.busy=!1,e.errors.set(t)},this.init=function(t){return new Promise(function(s,i){n.http.get(t,e.clean(e.data)).then(function(t){r(e.data,t.data),e.ready=!0,s(t)}).catch(function(t){e.errors.set(t.data),i(t)})})},this.post=function(t){return this.sendForm("post",t)},this.get=function(t){return this.sendForm("get",t)},this.put=function(t){return this.sendForm("put",t)},this.delete=function(t){return this.sendForm("delete",t)},this.sendForm=function(t,s){return new Promise(function(i,o){e.startProcessing(),n.http[t](s,e.clean(e.data)).then(function(t){r(e.data,t.data),e.finishProcessing(),i(t)}).catch(function(t){e.errors.set(t.data),e.busy=!1,o(t)})})},this.clean=function(t){return JSON.parse(JSON.stringify(t))}}function s(t){t.prototype.$form=function(r){return new n(t,r)},t.form=function(r){return new n(t,r)}}return s});